{% extends "base.html" %}
{% block content %}

<h2 style="text-align:center;">Your Classrooms</h2>

<div style="
    max-width: 780px;
    margin: 25px auto;
    padding: 28px 30px;
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 18px 45px rgba(15, 23, 42, 0.12);
">

    <table style="width:100%; border-collapse: collapse; text-align:center; margin: 0 auto;">
        <tr>
            <th style="border:1px solid #e1e3f0; padding:10px;">Code</th>
            <th style="border:1px solid #e1e3f0; padding:10px;">Class Name</th>
            <th style="border:1px solid #e1e3f0; padding:10px;">Your Role</th>
            <th style="border:1px solid #e1e3f0; padding:10px;">Action</th>
        </tr>

        {% for c in classrooms %}
        <tr>
            <td style="border:1px solid #e1e3f0; padding:10px;">{{ c.code }}</td>
            <td style="border:1px solid #e1e3f0; padding:10px;">{{ c.name }}</td>
            <td style="border:1px solid #e1e3f0; padding:10px;">{{ c.role }}</td>

            <td style="border:1px solid #e1e3f0; padding:10px;">

                <!-- ENTER (pareho sa lahat) -->
                <a href="{{ url_for('enter_classroom', code=c.code) }}"
                   class="btn"
                   style="padding:6px 18px; font-size:13px;">
                    Enter
                </a>

                {% if c.is_owner %}
                    {# ========== CLASS REP: DELETE CLASSROOM ========== #}
                    <a href="{{ url_for('classroom_delete', code=c.code) }}"
                       class="btn btn-secondary"
                       style="padding:6px 14px; font-size:13px; background:#ff6b6b; color:white;">
                        Delete
                    </a>
                {% else %}
                    {# ========== STUDENT: LEAVE CLASSROOM ========== #}
                    <form method="post"
                          action="{{ url_for('leave_classroom', code=c.code) }}"
                          style="display:inline-block; margin-left:6px;">
                        <button type="submit"
                                class="btn btn-secondary"
                                style="padding:6px 14px; font-size:13px;">
                            Leave
                        </button>
                    </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>

    <div style="text-align:center; margin-top: 25px;">
        <a class="btn"
           href="{{ url_for('classroom_join_create') }}"
           style="padding:10px 30px;">
            Join or Create New Classroom
        </a>
    </div>

</div>

{% endblock %}
